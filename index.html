<!DOCTYPE HTML>
<html>

<head>
  <title>KITA2021</title>
  <!-- CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

  <!-- jQuery and JS bundle w/ Popper.js -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
    crossorigin="anonymous"></script>

  <!-- Bootstrap Date-Picker Plugin -->
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" />

  <!-- JavaScript für Bootstrap -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

  <!-- eigenes CSS -->
  <link rel="stylesheet" href="kita2021.css" />

  <!-- eigenes JavaScript -->

</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Kita-Verwaltung</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="#">Suche nach Kita</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Suchen
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Suche nach Kita</a>
            <a class="dropdown-item" href="#">Suche nach Personal</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Anlegen
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Stammdaten</a>
            <a class="dropdown-item" href="#">Stelle</a>
            <a class="dropdown-item" href="#">Befristung</a>
            <a class="dropdown-item" href="#">Berufsverbot</a>
            <a class="dropdown-item" href="#">Erziehungsurlaub</a>
            <a class="dropdown-item" href="#">Langzeitkranker</a>
            <a class="dropdown-item" href="#">Mitarbeiterqualifikation</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <!-- Ende NavBar -->

  <!-- Errorcontainer -->
  <div class="container" id="errorcontainer" style="margin-top: 2em;"></div>
  <template id="alert_template">
    <div class="alert alert-warning" role="alert" style="cursor: pointer" onclick="clearErrorContainer()">$message$
    </div>
  </template>
  <script>
    let clearErrorContainer = () => {
      document.getElementById("errorcontainer").innerHTML = "";
    }
  </script>

  <!-- Formular -->
  <div class="container">
    <div class="form-group">
      <label class="heading">Kita</label>
      <select class="form-control" id="kita">
        <option>Haus des Kindes</option>
        <option>Kita Banana Building</option>
        <option>Kita Erlenbrunn</option>
        <option>Kita Fehrbach</option>
        <option>Kita Gersbach</option>
        <option>Kita Niedersimten</option>
        <option>Kita Ohmbach</option>
        <option>Kita Ruhbank</option>
        <option>Kita Sommerwald</option>
        <option>Kita Windsberg</option>
        <option>Kita Wittelsbach</option>
        <option>Krippe Erlenbrunn</option>
        <option>Krippe MTS</option>
      </select>
      <!-- Überschrift -->
      <div class="divider"></div>
      <label class="heading">Datum</label>

      <!-- Aktuelles Datum -->
      <div class="form-check">
        <input class="form-check-input" name="radio_date" type="radio" id="actual_date" onclick="enableDateInput(false)"
          checked>
        <label class="form-check-label">
          Aktuelles Datum
        </label>
      </div>
      <!-- Datum wählen-->
      <div class="form-check">
        <input class="form-check-input" name="radio_date" type="radio" id="pick_date" onclick="enableDateInput(true)">
        <label class="form-check-label">
          Datum wählen
        </label>
      </div>
      <script>
        let enableDateInput = (bool) => {
          if (bool) {
            document.getElementById("date_input").removeAttribute("readonly");
          } else {
            document.getElementById("date_input").setAttribute("readonly", true);
          }
        }
      </script>
      <!--<input class="form-control" type="text" placeholder="Readonly input here…" readonly>-->
      <div class='input-group date' id='datetimepicker'>
        <input type='text' class="form-control" data-provide="datepicker" name="date" readonly id="date_input" onclick="checkReadOnly()"></input>
      </div>
      <script>
        $(document).ready(function () {
          var date_input = $('input[name="date"]');
          var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
          date_input.datepicker({
            format: 'dd.mm.yyyy',
            container: container,
            todayHighlight: true,
            autoclose: true,
          })
        })
      </script>

      <button id="select_button" type="button" class="btn btn-dark" style="margin-top: 1em;"
        onclick="select()">Suchen</button>
      <script>
        let select = () => {
          let kitaSelect = document.getElementById("kita");
          let kita = kitaSelect.options[kitaSelect.selectedIndex].value;
          let date;
          if (document.getElementById("actual_date").checked) {
            debugger;
            let d = new Date();
            let day = String(d.getDate()).padStart(2, '0');
            let month = String(d.getMonth() + 1).padStart(2, '0');
            let year = d.getFullYear();
            date = day + "." + month + "." + year;
          } else {
            date = document.getElementById("date_input").value;
            if (date === "") {
              showErrorDialog("Geben Sie ein Datum ein!");
              return;
            }
          }
          console.log("KITA: " + kita);
          console.log("DATUM: " + date);
          let sqlString = "";
        }

        let showErrorDialog = (message) => {
          let template = document.getElementById("alert_template");
          let alert = document.getElementById("alert_template").innerHTML;
          alert = alert.replace("$message$", message);
          document.getElementById("errorcontainer").innerHTML = alert;
        }
        let checkReadOnly = () => {
          if (document.getElementById("date_input").hasAttribute("readonly"))
            showErrorDialog("Feld nicht ausgewählt!");
        }

      </script>
    </div>
  </div>
</body>

</html>